@inherits LayoutComponentBase
@using Famick.HomeManagement.UI.Theme
@inject ILocalizer L

<LocalizationInitializer>
    <MudThemeProvider Theme="FamickTheme.Theme" IsDarkMode="_isDarkMode" />
    <MudPopoverProvider />
    <MudDialogProvider />
    <MudSnackbarProvider />

    <MudLayout>
        <MudAppBar Elevation="1">
            <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@ToggleDrawer" />
            <MudImage Src="_content/Famick.HomeManagement.UI/images/icon.svg" Height="28" Class="ml-1" Alt="Famick" />
            <MudText Typo="Typo.h6" Class="ml-1" Style="white-space: nowrap;">@L["nav.homeManagement"]</MudText>
            <MudSpacer />
            <LanguageSelector />
            <MudTooltip Text="@(_isDarkMode ? L["settings.switchToLightMode"] : L["settings.switchToDarkMode"])">
                <MudIconButton Icon="@(_isDarkMode ? Icons.Material.Filled.LightMode : Icons.Material.Filled.DarkMode)"
                               Color="Color.Inherit"
                               OnClick="@ToggleDarkMode" />
            </MudTooltip>
            <LoginDisplay />
        </MudAppBar>

        <MudDrawer @bind-Open="_drawerOpen" ClipMode="DrawerClipMode.Always" Elevation="2">
            <NavMenu />
        </MudDrawer>

        <MudMainContent Class="pt-16 px-4">
            <MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="my-4">
                @Body
            </MudContainer>
        </MudMainContent>
    </MudLayout>
</LocalizationInitializer>

@code {
    private bool _drawerOpen = true;
    private bool _isDarkMode = false;

    private void ToggleDrawer()
    {
        _drawerOpen = !_drawerOpen;
    }

    private void ToggleDarkMode()
    {
        _isDarkMode = !_isDarkMode;
    }
}
